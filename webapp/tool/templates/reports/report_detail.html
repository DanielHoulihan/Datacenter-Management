{% include 'reports/base.html'%}

<div class="sidenav">
  <img style="padding:12px" src="/../../static/images/logo.png" alt="Beeyon" width="125" height="70">
  <a href="{% url 'get_reports' %}">Home</a>
  <br><br>
  <form method="POST" class="post-form"> 
    {% csrf_token %}
    <ul style="list-style-type:none">
      <dev class="white_text">
      <li> <b> Threshold </b></li>
      <li><b>0-X-Y-100</b></li>
    </dev>
      <br>
      <!-- <li><input style="height:20px" type="text" name="low" placeholder={{threshold.low}} size="10"></li>
      <li><input style="height:20px" type="text" name="medium" placeholder={{threshold.medium}} size="10"></li>
      <select name="age" id="selectThreshold"></select> -->
      
      <li><select name="low" id="selectThreshold" placeholder={{threshold.low}}></select></li>
      <li><select name="medium" id="selectThreshold2" placeholder={{threshold.medium}}></select></li>
    </ul>
    <div class ="wrapper">
    <button type="submit" class="save">Submit</button>
  </div>
  </form>
</div>

{% block content %}

<div class="content">
  <div class="card-container">
    {% for host in hosts %}
    <div class="card">
      <div style="background-color: rgb(255, 255, 255)">
        <b>Host Name: {{ host.hostName }}</b>
        <hr>
        <p>Host ID: {{ host.hostId }}</p>
        {% if host.cpu_usage > threshold.medium %}
          <p style="background-color: rgb(235, 59, 59); color:#ffffff" > CPU Usage: {{ host.cpu_usage }}%</p>
        {% elif host.cpu_usage < threshold.low %} 
          <p style="background-color: rgb(11, 226, 58)">CPU Usage: {{ host.cpu_usage }}%</p>
        {% else %} 
          <p style="background-color: rgb(235, 188, 59)">CPU Usage: {{ host.cpu_usage }}%</p>
        {% endif %}
          <p>Report ID: {{ host.reportId }}</p>
          <a href="hosts/{{host.id}}"><input type="submit" value="Host Details"
              class="btn btn-danger btn-sm" type="button" /></a>
      </div>
    </div>
    {% endfor %}
  </div>  
</div>
{% endblock %}

<!-- <script type="text/javascript" src= "/../../static/js/script.js"></script> -->
<script>

  var selectAge = document.getElementById("selectThreshold");
  var contents;
  contents += "<option value='' disabled selected hidden>{{threshold.low}}</option>"
  for (let i = 1; i <= 100; i++) {
    contents += "<option>" + i + "</option>";
  }
  selectAge.innerHTML = contents;

</script>
<script>

  var selectAge = document.getElementById("selectThreshold2");
  var contents2;
  contents2 += "<option value='' disabled selected hidden>{{threshold.medium}}</option>"
  for (let i = 1; i <= 100; i++) {
    contents2 += "<option>" + i + "</option>";
  }
  selectAge.innerHTML = contents2;

</script>

