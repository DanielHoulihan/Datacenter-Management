{% include 'home/base.html'%}
<head>
    <link rel="stylesheet" href="/../../static/css/styles.css">
</head>
  
  {% block content %}
  
  <div class="content">
    {% comment %} <h2>All hosts in data centers: {{tco_count}}</h2> {% endcomment %}
    
      {% if error.non_field_errors %}<div class="capital-error">{{error.non_field_errors}}</div>{% endif %}
      {% for host in tco %}
      <div class="card-container">
          <div class="tco-card">
          <b>Host ID: {{ host.hostid }}</b>
          <hr>
          <p>Floor: {{ host.floorid }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rack: {{ host.rackid }}</p>
          <p>IP Address: {{ host.ipaddress }}</p><hr>

          <form method="POST">
            {% csrf_token %}
            <label for="capital" >Capital Cost</label>
            <input type="number" id="capital" name="capital" required placeholder={{host.capital}}>
            <input type=hidden id=host name= host value={{host.hostid}}>
            <input type=hidden id=rack name= rack value={{host.rackid}}>
            <input type=hidden id=floor name= floor value={{host.floorid}}>
            <button type="submit" class="tco_calculate_button" >Calculate</button>
          </form>
          <hr>
          {% if host.capital != none %} 
          <table class ="tco-table">
            <tr>
              <th>Responses (mins)</th>
              <td>            
                {{host.minutes|floatformat}}
              </td>
            </tr>
            <tr>
              <th>kWh Consumed</th>
              <td>            
                {{host.kWh_consumed|floatformat}} 
              </td>
            </tr>
            <tr>
              <th>TCO 3yrs (€)</th>
              <td>            
                {{host.TCO|floatformat}}
              </td>
            </tr>

            <tr>
              <th>Operational Cons 3yrs (kWh)</th>
              <td>            
                {{host.ops_cons_3|floatformat}}
              </td>
            </tr>
            <tr>
              <th>Operational Cost 3yrs (€)</th>
              <td>            
                {{host.op_cost_3|floatformat}}
              </td>
            </tr>
            <tr>
              <th>Carbon Footprint 3yrs (KgCo2)</th>
              <td>            
                {{host.carbon_footprint_3|floatformat}}
              </td>
            </tr>
            <tr>
              <th>Apparant Wastage 3yrs (€)</th>
              <td>            
                {{host.app_waste_cost_3|floatformat}}
              </td>
            </tr>
          </table>
          
          <form method="POST">
            {% csrf_token %}
            <label for="capital"></label>
            <input type="hidden" id="capital" name="capital" value={{host.capital}}>
            <input type="hidden" id="host" name= "host" value={{host.hostid}}>
            <input type="hidden" id="rack" name= "rack" value={{host.rackid}}>
            <input type="hidden" id="floor" name= "floor" value={{host.floorid}}>
            <button type="submit" class="tco_update_button">Update</button>
          </form>
          {%else%}
          <br>
            Enter Capital Cost to Calculate Metrics
          {% endif %}
      </div>

    </div> 
      {% endfor %}
     
  </div>

  {% endblock %}

